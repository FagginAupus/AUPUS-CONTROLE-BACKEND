"use strict";(self.webpackChunkaupus_energia_react=self.webpackChunkaupus_energia_react||[]).push([[558],{2558:(n,a,o)=>{o.r(a),o.d(a,{default:()=>l});var e=o(5043),t=o(6885),c=o(5731),r=o(5327),i=o(6963);class s{constructor(){this.initialized=!0,this.imagensBase64={}}getIconSVG(n){try{let a;switch(n){case"globe":a=c.A;break;case"mail":a=r.A;break;case"phone":a=i.A;break;default:return""}return(0,t.qV)(e.createElement(a,{size:16,color:"#2c3e50",strokeWidth:2}))}catch(a){console.error("Erro ao renderizar \xedcone:",a);return{globe:"\ud83c\udf10",mail:"\u2709\ufe0f",phone:"\ud83d\udcf1"}[n]||""}}calcularScaleFactor(n){return n<=3?1.05:n<=6?1.02:1}async carregarImagemComoBase64(n){return new Promise((a,o)=>{const e=new Image;e.crossOrigin="anonymous",e.onload=function(){try{const o=document.createElement("canvas");o.width=e.width,o.height=e.height;o.getContext("2d").drawImage(e,0,0);const t=o.toDataURL("image/png");console.log("\u2705 Imagem ".concat(n," convertida para Base64")),a(t)}catch(t){console.error("\u274c Erro ao converter ".concat(n,":"),t),o(t)}},e.onerror=()=>{console.error("\u274c Erro ao carregar imagem: ".concat(n)),o(new Error("Falha ao carregar: ".concat(n)))},e.src=n})}async carregarTodasImagens(){try{console.log("\ud83d\uddbc\ufe0f Carregando imagens...");const[n,a,o]=await Promise.all([this.carregarImagemComoBase64("/Logo.png"),this.carregarImagemComoBase64("/Frase_interligando.png"),this.carregarImagemComoBase64("/Onda.png")]);return this.imagensBase64={logo:n,slogan:a,onda:o},console.log("\u2705 Todas as imagens carregadas e convertidas para Base64"),!0}catch(n){return console.warn("\u26a0\ufe0f Erro ao carregar algumas imagens:",n),!1}}async loadHtml2Canvas(){if(window.html2canvas)return!0;try{return console.log("\ud83d\udce5 Carregando html2canvas..."),await new Promise((n,a)=>{const o=document.createElement("script");o.src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js",o.onload=n,o.onerror=()=>a(new Error("Falha ao carregar html2canvas")),document.head.appendChild(o)}),console.log("\u2705 html2canvas carregado com sucesso"),!0}catch(n){throw console.error("\u274c Erro ao carregar html2canvas:",n),new Error("N\xe3o foi poss\xedvel carregar html2canvas")}}async loadJsPDF(){if(window.jspdf)return!0;try{return console.log("\ud83d\udce5 Carregando jsPDF..."),await new Promise((n,a)=>{const o=document.createElement("script");o.src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js",o.onload=n,o.onerror=()=>a(new Error("Falha ao carregar jsPDF")),document.head.appendChild(o)}),console.log("\u2705 jsPDF carregado com sucesso"),!0}catch(n){throw console.error("\u274c Erro ao carregar jsPDF:",n),new Error("N\xe3o foi poss\xedvel carregar jsPDF")}}async gerarHTML(n){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=null,e=null;try{console.log("\ud83d\udcc4 Iniciando gera\xe7\xe3o de PDF via HTML...",n.numeroProposta),e=document.createElement("div"),e.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.8);\n        z-index: 999999;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: white;\n        font-size: 20px;\n        font-family: Arial, sans-serif;\n      ",e.innerHTML="<div>\ud83d\udcc4 Gerando PDF...</div>",document.body.appendChild(e),await Promise.all([this.loadJsPDF(),this.loadHtml2Canvas()]),await this.carregarTodasImagens();const t=await this.criarLayoutHTML(n);o=document.createElement("iframe"),o.style.cssText="\n        position: fixed;\n        top: -10000px;\n        left: -10000px;\n        width: 210mm;\n        height: 297mm;\n        border: none;\n        background: white;\n      ",document.body.appendChild(o);const c=o.contentDocument||o.contentWindow.document;c.open(),c.write(t),c.close(),console.log("\ud83d\udcf8 Aguardando renderiza\xe7\xe3o..."),await new Promise(n=>setTimeout(n,1e3));const r=c.querySelector(".page-container");if(!r)throw new Error("Elemento .page-container n\xe3o encontrado");console.log("\ud83d\udcf8 Capturando HTML como imagem...");const i=await window.html2canvas(r,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",logging:!1});console.log("\u2705 Captura conclu\xedda. Gerando PDF...");const{jsPDF:s}=window.jspdf,l=new s({orientation:"portrait",unit:"mm",format:"a4",compress:!0}),d=210,p=i.height*d/i.width,m=i.toDataURL("image/jpeg",.95);l.addImage(m,"JPEG",0,0,d,p);const f=this.gerarNomeArquivo(n);return a&&(l.save(f),console.log("\u2705 PDF baixado:",f)),o&&document.body.contains(o)&&document.body.removeChild(o),e&&document.body.contains(e)&&document.body.removeChild(e),{nomeArquivo:f,pdfBlob:l.output("blob"),success:!0}}catch(t){throw console.error("\u274c Erro ao gerar PDF:",t),o&&document.body.contains(o)&&document.body.removeChild(o),e&&document.body.contains(e)&&document.body.removeChild(e),t}}async criarLayoutHTML(n){const a=n.ucs?n.ucs.length:0,o=this.calcularScaleFactor(a);return'<!DOCTYPE html>\n<html lang="pt-BR">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>Proposta '.concat(n.numeroProposta," - ").concat(n.nomeCliente,"</title>\n  <style>\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n\n    body {\n      font-family: 'Helvetica', 'Arial', sans-serif;\n      background: white;\n      color: #3c3c3c;\n      padding: 0;\n      margin: 0;\n    }\n\n    /* CSS Responsivo baseado em ").concat(a," UCs - Scale: ").concat(o.toFixed(2)," */\n    :root {\n      --scale-factor: ").concat(o,';\n    }\n\n    .page-container {\n      width: 210mm;\n      min-height: 297mm;\n      margin: 0 auto;\n      background: white;\n      position: relative;\n      padding: 0;\n      padding-bottom: 70px; /* Espa\xe7o para rodap\xe9 - REDUZIDO */\n      border: 0; /* SEM BORDAS */\n      border-top: 15px solid #2c3e50; /* APENAS BORDA SUPERIOR */\n    }\n\n    /* Cabe\xe7alho - RESPONSIVO */\n    .header {\n      background: #2c3e50;\n      padding: calc(8px * var(--scale-factor)) 20px;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      height: calc(45px * var(--scale-factor));\n    }\n\n    .header img {\n      height: calc(38px * var(--scale-factor));\n      width: auto;\n    }\n\n    .header h1 {\n      color: white;\n      font-size: calc(15px * var(--scale-factor));\n      font-weight: bold;\n      margin-left: 15px;\n    }\n\n    /* Se\xe7\xf5es - RESPONSIVAS */\n    .section {\n      padding: calc(8px * var(--scale-factor)) calc(25px * var(--scale-factor)) calc(10px * var(--scale-factor)) calc(25px * var(--scale-factor));\n      border-bottom: 1px solid #d0d0d0;\n    }\n\n    .section-title {\n      font-size: calc(13px * var(--scale-factor));\n      font-weight: bold;\n      color: #2c3e50;\n      margin-bottom: calc(6px * var(--scale-factor));\n      padding-bottom: calc(4px * var(--scale-factor));\n      border-bottom: 2px solid #4caf50;\n      display: inline-block;\n      padding-right: 15px;\n    }\n\n    /* Informa\xe7\xf5es do Cliente - RESPONSIVO */\n    .client-info {\n      display: flex;\n      gap: calc(25px * var(--scale-factor));\n      font-size: calc(10px * var(--scale-factor));\n      margin-top: calc(4px * var(--scale-factor));\n      background: #f8f9fa;\n      padding: calc(8px * var(--scale-factor)) calc(12px * var(--scale-factor));\n      border-radius: 3px;\n      border-left: 3px solid #2c3e50;\n    }\n\n    .client-info .field {\n      display: flex;\n      gap: 6px;\n      align-items: center;\n    }\n\n    .client-info .label {\n      font-weight: bold;\n      color: #2c3e50;\n    }\n\n    .client-info .field span:not(.label) {\n      color: #444;\n    }\n\n    /* Plano Economia - RESPONSIVO */\n    .economy-plan {\n      display: flex;\n      align-items: center;\n      gap: calc(40px * var(--scale-factor));\n      margin-top: calc(4px * var(--scale-factor));\n      background: linear-gradient(135deg, #f0f9f4 0%, #e8f5e9 100%);\n      padding: calc(10px * var(--scale-factor)) calc(15px * var(--scale-factor));\n      border-radius: 4px;\n      border: 2px solid #4caf50;\n    }\n\n    .economy-value {\n      display: flex;\n      align-items: center;\n      gap: calc(10px * var(--scale-factor));\n    }\n\n    .economy-value .label {\n      font-weight: bold;\n      font-size: calc(11px * var(--scale-factor));\n      color: #2c3e50;\n    }\n\n    .economy-value .value {\n      font-size: calc(26px * var(--scale-factor));\n      font-weight: bold;\n      color: #2e7d32;\n      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);\n    }\n\n    .fidelity {\n      display: flex;\n      align-items: center;\n      gap: calc(8px * var(--scale-factor));\n      background: white;\n      padding: calc(6px * var(--scale-factor)) calc(12px * var(--scale-factor));\n      border-radius: 3px;\n      border: 1px solid #ddd;\n    }\n\n    .fidelity .label {\n      font-weight: bold;\n      font-size: calc(11px * var(--scale-factor));\n      color: #2c3e50;\n    }\n\n    .fidelity .value {\n      font-size: calc(12px * var(--scale-factor));\n      font-weight: bold;\n      color: #d32f2f;\n    }\n\n    /* Tabela de UCs - RESPONSIVA */\n    .uc-table {\n      width: 100%;\n      border-collapse: collapse;\n      margin-top: calc(6px * var(--scale-factor));\n      font-size: calc(9px * var(--scale-factor));\n      table-layout: fixed;\n    }\n\n    .uc-table thead {\n      background: #46648a;\n      color: white;\n    }\n\n    .uc-table th {\n      padding: calc(5px * var(--scale-factor)) calc(3px * var(--scale-factor));\n      text-align: left;\n      font-weight: bold;\n      font-size: calc(8px * var(--scale-factor));\n    }\n\n    /* Larguras espec\xedficas das colunas */\n    .uc-table th:nth-child(1),\n    .uc-table td:nth-child(1) {\n      width: 22%; /* Nome - AUMENTADO */\n    }\n\n    .uc-table th:nth-child(2),\n    .uc-table td:nth-child(2) {\n      width: 13%; /* Consumo - REDUZIDO */\n    }\n\n    .uc-table th:nth-child(3),\n    .uc-table td:nth-child(3) {\n      width: 12%; /* Sem Assinatura - REDUZIDO */\n    }\n\n    .uc-table th:nth-child(4),\n    .uc-table td:nth-child(4) {\n      width: 12%; /* Com Assinatura - REDUZIDO */\n    }\n\n    .uc-table th:nth-child(5),\n    .uc-table td:nth-child(5) {\n      width: 10%; /* Taxa Fixa - REDUZIDO */\n    }\n\n    .uc-table th:nth-child(6),\n    .uc-table td:nth-child(6) {\n      width: 15%; /* Economia Mensal */\n    }\n\n    .uc-table th:nth-child(7),\n    .uc-table td:nth-child(7) {\n      width: 16%; /* Economia Anual */\n    }\n\n    .uc-table tbody tr:nth-child(even) {\n      background: #f8f8f8;\n    }\n\n    .uc-table td {\n      padding: calc(4px * var(--scale-factor)) calc(3px * var(--scale-factor));\n      font-size: calc(9px * var(--scale-factor));\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    /* Gr\xe1fico Economia 5 Anos - RESPONSIVO */\n    .chart-container {\n      margin-top: calc(8px * var(--scale-factor));\n      background: linear-gradient(to bottom, #f5f5f5 0%, #fafafa 100%);\n      padding: calc(12px * var(--scale-factor));\n      border-radius: 4px;\n      border: 1px solid #e0e0e0;\n      box-shadow: 0 1px 3px rgba(0,0,0,0.05);\n    }\n\n    .bars-container {\n      display: flex;\n      justify-content: space-around;\n      align-items: flex-end;\n      height: calc(140px * var(--scale-factor));\n      margin-bottom: calc(10px * var(--scale-factor));\n      position: relative;\n      border-bottom: 2px solid #2c3e50;\n      padding-bottom: calc(8px * var(--scale-factor));\n    }\n\n    .bar-wrapper {\n      text-align: center;\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: flex-end;\n      height: 100%;\n    }\n\n    .bar {\n      background: linear-gradient(to top, #1e3a5f 0%, #2c3e50 100%);\n      border: 2px solid #1e324a;\n      width: 75%;\n      position: relative;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 4px 4px 0 0;\n      box-shadow: 0 -2px 8px rgba(0,0,0,0.15);\n      transition: all 0.3s ease;\n      /* Altura definida inline para cada barra */\n    }\n\n    .bar-value {\n      color: white;\n      font-weight: bold;\n      font-size: calc(9px * var(--scale-factor));\n      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);\n    }\n\n    .bar-label {\n      margin-top: calc(6px * var(--scale-factor));\n      font-weight: bold;\n      font-size: calc(10px * var(--scale-factor));\n      color: #2c3e50;\n      background: white;\n      padding: calc(3px * var(--scale-factor)) calc(6px * var(--scale-factor));\n      border-radius: 3px;\n      border: 1px solid #ddd;\n    }\n\n    .total-economy {\n      font-size: calc(13px * var(--scale-factor));\n      font-weight: bold;\n      color: #2e7d32;\n      text-align: center;\n      margin-top: calc(10px * var(--scale-factor));\n      padding: calc(8px * var(--scale-factor));\n      background: white;\n      border-radius: 4px;\n      border: 2px solid #4caf50;\n    }\n\n    /* Benef\xedcios - RESPONSIVO */\n    .benefits-list {\n      margin-top: calc(6px * var(--scale-factor));\n      padding-left: calc(18px * var(--scale-factor));\n    }\n\n    .benefits-list li {\n      margin-bottom: calc(4px * var(--scale-factor));\n      font-size: calc(10px * var(--scale-factor));\n      line-height: 1.4;\n    }\n\n    /* Rodap\xe9 */\n    .footer {\n      position: absolute;\n      bottom: 25px;\n      left: 40px;\n      right: 40px;\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-end;\n      font-size: 11px;\n    }\n\n    .footer-contacts {\n      text-align: left;\n    }\n\n    .footer-contacts p {\n      margin: 4px 0;\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n\n    .footer-contacts svg {\n      width: 16px;\n      height: 16px;\n      flex-shrink: 0;\n      vertical-align: middle;\n    }\n\n    .footer-slogan {\n      text-align: center;\n      flex: 1;\n    }\n\n    .footer-slogan img {\n      max-width: 350px;\n      height: auto;\n    }\n\n    .footer-wave {\n      text-align: right;\n    }\n\n    .footer-wave img {\n      max-width: 100px;\n      height: auto;\n    }\n\n    @media print {\n      .page-container {\n        border: 12px solid #2c3e50;\n        margin: 0;\n        width: 210mm;\n        min-height: 297mm;\n      }\n\n      body {\n        margin: 0;\n        padding: 0;\n      }\n    }\n  </style>\n</head>\n<body>\n  <div class="page-container">\n\n    \x3c!-- Cabe\xe7alho --\x3e\n    <div class="header">\n      ').concat(this.imagensBase64.logo?'<img src="'.concat(this.imagensBase64.logo,'" alt="AUPUS Logo">'):'<div style="color: white; font-weight: bold; font-size: 16px;">AUPUS</div>','\n      <h1>Proje\xe7\xe3o de efici\xeancia econ\xf4mica</h1>\n    </div>\n\n    \x3c!-- Informa\xe7\xf5es do Cliente --\x3e\n    <div class="section">\n      <div class="section-title">Cliente</div>\n      <div class="client-info">\n        <div class="field">\n          <span class="label">Nome:</span>\n          <span>').concat(n.nomeCliente||"",'</span>\n        </div>\n        <div class="field">\n          <span class="label">Proposta:</span>\n          <span>').concat(n.numeroProposta||"",'</span>\n        </div>\n        <div class="field">\n          <span class="label">Data:</span>\n          <span>').concat(this.formatarData(n.data),'</span>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Plano Economia --\x3e\n    <div class="section">\n      <div class="section-title">Plano Economia</div>\n      <div class="economy-plan">\n        <div class="economy-value">\n          <span class="label">Economia Esperada:</span>\n          <span class="value">').concat(this.calcularDescontoPercentual(n.descontoTarifa),'%</span>\n        </div>\n        <div class="fidelity">\n          <span class="label">Fidelidade:</span>\n          <span class="value">N\xc3O</span>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Tabela de Unidades Consumidoras --\x3e\n    ').concat(this.gerarTabelaUCs(n.ucs,n.tarifaTributos,n.descontoTarifa),"\n\n    \x3c!-- Gr\xe1fico Economia 5 Anos --\x3e\n    ").concat(this.gerarGraficoEconomia(n),"\n\n    \x3c!-- Benef\xedcios --\x3e\n    ").concat(this.gerarBeneficios(n.beneficios),'\n\n    \x3c!-- Rodap\xe9 --\x3e\n    <div class="footer">\n      <div class="footer-contacts">\n        <p>').concat(this.getIconSVG("globe")," www.aupusenergia.com.br</p>\n        <p>").concat(this.getIconSVG("mail")," smart@aupusenergia.com.br</p>\n        <p>").concat(this.getIconSVG("phone"),' (62) 9 9654-7888</p>\n      </div>\n      <div class="footer-slogan">\n        ').concat(this.imagensBase64.slogan?'<img src="'.concat(this.imagensBase64.slogan,'" alt="Interligando voc\xea com o futuro!">'):'<p style="color: #4caf50; font-style: italic; font-size: 14px;">Interligando voc\xea com o futuro!</p>','\n      </div>\n      <div class="footer-wave">\n        ').concat(this.imagensBase64.onda?'<img src="'.concat(this.imagensBase64.onda,'" alt="Onda">'):"","\n      </div>\n    </div>\n\n  </div>\n</body>\n</html>")}gerarTabelaUCs(n,a,o){if(!n||0===n.length)return"";const e=n.slice(0,18);let t='\n    <div class="section">\n      <div class="section-title">Unidades Consumidoras</div>\n      <table class="uc-table">\n        <thead>\n          <tr>\n            <th>Nome</th>\n            <th>Consumo</th>\n            <th>Sem<br>Assinatura</th>\n            <th>Com<br>Assinatura</th>\n            <th>Taxa<br>Fixa</th>\n            <th>Economia<br>Mensal</th>\n            <th>Economia<br>Anual</th>\n          </tr>\n        </thead>\n        <tbody>';return e.forEach((n,e)=>{const c=parseFloat(n.consumo)||0,r=parseFloat(a)||.8,i=parseFloat(o)||.2,s=c*r,l=c*r*i,d=12*l,p=c*r*(1-i),m=this.calcularTaxaFixa(n.ligacao),f=(n.apelido||"UC ".concat(e+1)).substring(0,25),g=n=>n.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2});t+="\n          <tr>\n            <td>".concat(f,"</td>\n            <td>").concat(c.toFixed(0)," kWh</td>\n            <td>R$ ").concat(g(s),"</td>\n            <td>R$ ").concat(g(p),"</td>\n            <td>R$ ").concat(g(m),"</td>\n            <td>R$ ").concat(g(l),"</td>\n            <td>R$ ").concat(g(d),"</td>\n          </tr>")}),t+="\n        </tbody>\n      </table>",n.length>18&&(t+='<p style="color: #b40000; font-size: 10px; margin-top: 5px;">+ '.concat(n.length-18," unidades adicionais</p>")),t+="</div>",t}calcularTaxaFixa(n){switch(null===n||void 0===n?void 0:n.toUpperCase()){case"TRIF\xc1SICA":case"TRIFASICA":return 112;case"BIF\xc1SICA":case"BIFASICA":return 62;default:return 42}}gerarGraficoEconomia(n){if(!n.ucs||0===n.ucs.length||!n.tarifaTributos)return"";const a=this.calcularEconomiaConsolidada(n.ucs,n.tarifaTributos,n.descontoTarifa,n.inflacao),o=n.ucs?n.ucs.length:0,e=this.calcularScaleFactor(o),t=Math.max(...a.economiasPorAno),c=Math.min(...a.economiasPorAno),r=30*e,i=140*e-10*e;let s='\n    <div class="section">\n      <div class="section-title">Economia nos pr\xf3ximos cinco anos</div>\n      <div class="chart-container">\n        <div class="bars-container">';a.economiasPorAno.forEach((n,a)=>{const o=t-c,e=(.4+.6*(o>0?(n-c)/o:0))*(i-r),l=Math.min(r+e,i);console.log("Ano ".concat(a+1,": Valor=").concat(n,", AlturaFinal=").concat(l,"px (max: ").concat(i,"px)"));const d=n.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0});s+='\n          <div class="bar-wrapper">\n            <div class="bar" style="height: '.concat(l,"px !important; min-height: ").concat(l,"px !important; max-height: ").concat(l,'px !important;">\n              <span class="bar-value">').concat(d,'</span>\n            </div>\n            <div class="bar-label">Ano ').concat(a+1,"</div>\n          </div>")});const l=a.economiaTotal.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:0,maximumFractionDigits:0});return s+='\n        </div>\n        <div class="total-economy">Economia Total: '.concat(l,"</div>\n      </div>\n    </div>"),s}calcularEconomiaConsolidada(n,a,o,e){const t=Array(5).fill(0);return n.forEach(n=>{this.calcularEconomia5Anos(n,a,o,e).forEach((n,a)=>{t[a]+=n})}),{economiasPorAno:t,economiaTotal:t.reduce((n,a)=>n+a,0)}}calcularEconomia5Anos(n,a,o,e){const t=parseFloat(n.consumo)||0,c=parseFloat(a)||.8,r=parseFloat(o)||.2,i=parseFloat(e)||.02;if(0===t||0===c)return Array(5).fill(0);const s=[];let l=12*(t*c*r);for(let d=1;d<=5;d++)s.push(l),l*=1+i;return s}gerarBeneficios(n){if(!n||0===n.length)return"";const a=n.slice(0,10);let o='\n    <div class="section">\n      <div class="section-title">Informa\xe7\xf5es e Benef\xedcios</div>\n      <ul class="benefits-list">';return a.forEach((n,a)=>{const e=n.numero||a+1,t=n.texto||n.toString();o+="<li>".concat(e,". ").concat(t,"</li>")}),o+="</ul>",n.length>10&&(o+='<p style="color: #b40000; font-size: 10px; margin-top: 5px;">+ '.concat(n.length-10," benef\xedcios adicionais</p>")),o+="</div>",o}formatarData(n){if(!n)return"";try{const a=n.toString();if(a.includes("-")){const[n,o,e]=a.split("T")[0].split("-");return"".concat(e.padStart(2,"0"),"/").concat(o.padStart(2,"0"),"/").concat(n)}return new Date(n).toLocaleDateString("pt-BR")}catch(a){return console.error("Erro ao formatar data:",a),""}}calcularDescontoPercentual(n){return Math.round(100*(n||.2))}gerarNomeArquivo(n){var a,o;const e=(null===(a=n.numeroProposta)||void 0===a?void 0:a.replace(/[/\\]/g,"_"))||"Proposta",t=(null===(o=n.nomeCliente)||void 0===o?void 0:o.replace(/[^a-zA-Z0-9]/g,"_"))||"Cliente",c=(new Date).toISOString().slice(0,10);return"".concat(e,"_").concat(t,"_").concat(c,".pdf")}formatarDadosParaHTML(n){return{numeroProposta:n.numero_proposta||n.numeroProposta,nomeCliente:n.nome_cliente||n.nomeCliente,consultor:n.consultor,data:n.data_proposta||n.data,descontoTarifa:parseFloat(n.desconto_tarifa||n.descontoTarifa)||.2,descontoBandeira:parseFloat(n.desconto_bandeira||n.descontoBandeira)||.2,tarifaTributos:parseFloat(n.tarifa_tributos||n.tarifaTributos)||.8,inflacao:parseFloat(n.inflacao)||.02,observacoes:n.observacoes||"",ucs:this.formatarUCs(n.unidades_consumidoras||n.ucs||[]),beneficios:this.formatarBeneficios(n.beneficios||[])}}formatarUCs(n){if("string"===typeof n)try{n=JSON.parse(n)}catch(a){return[]}return Array.isArray(n)?n.map(n=>({apelido:n.apelido||n.numero_unidade||"UC",numeroUC:n.numero_unidade||n.numeroUC||"",ligacao:n.ligacao||n.tipo_ligacao||"Monof\xe1sica",consumo:n.consumo_medio||n.consumo||0})):[]}formatarBeneficios(n){if("string"===typeof n)try{n=JSON.parse(n)}catch(a){return[]}return Array.isArray(n)?n.map((n,a)=>({numero:n.numero||a+1,texto:n.texto||n.toString()})):[]}static async baixarPDF(n){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const o=new s;return await o.gerarHTML(n,a)}static async baixarPDFDeProposta(n){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const o=new s,e=o.formatarDadosParaHTML(n);return await o.gerarHTML(e,a)}}const l=s;"undefined"!==typeof window&&(window.PDFGenerator=s)}}]);
//# sourceMappingURL=558.cfe9209d.chunk.js.map